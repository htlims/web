<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Computer Networks - TP3</title>
  <link rel="stylesheet" media="screen" href="css/tp.css" type="text/css" title="compnetTP">
</head>
<body>
<h1>Computer Networks</h1>
<h1>TP3: Domain Name System and Spam</h1>

<h2>Objectives:</h2>
<ul>
    <li>understanding and using DNS</li>
  <li>understanding how to fight against spam using DNS and SMTP</li>
</ul>
<h2>Prerequisites:</h2>
<ul>
  <li>TP1</li>
  <li>Wireshark</li>
</ul>
<h2>Exercises:</h2>

<h3>1. DNS: Application Protocol</h3>
<p>
Capture packets by Wireshark utility  while running nslookup command:
start packet capture, do a nslookup to find the IP address of
      <tt>adelaide.edu.au</tt>, stop packet capture. Use the Wireshark
      trace to answer the following questions.
</p>

<p>1.1 What transport protocol does DNS application protocol use?</p>

<p>1.2 Why do you think this protocol is used?</p>

<p>1.3 What is the destination port for the DNS query message? What is
the source port of DNS response message?
</p>

<h3>2. DNS: Domain Name Servers</h3>

<p>
2.1 What are the following resource records types used for: A, NS, SOA,
CNAME, PTR, MX? HINT: check
<a href="http://en.wikipedia.org/wiki/List_of_DNS_record_types"
target="new">this link</a>.
</p>

<p>Use the <strong>nslookup</strong> command to answer the following questions.</p>

<p>2.2 What is the IP address of <tt>adelaide.edu.au</tt>? Which
type of DNS query is sent to get this answer?
</p>

<p>2.3 What is the DNS name associated with the IP address 192.43.228.130?
Which type of DNS query is sent to get this answer? <br>
</p>

<p>
2.4 What is the IP address of the local name server for your
machine? (Hint: use the Wireshark trace to see where the query is sent to.)
</p>

<p>
Use the options you found in question 2.1 for reference to answer
the following questions.
</p>
<p>
2.5 Run nslookup to determine the authoritative DNS servers for
Dongseo University. Which type of resource records contains this information?
</p>

<p>
2.6 Run nslookup so that one of the DNS servers obtained in Question
2.5 is queried for the mail servers for Yahoo! mail. Did you get an
authoritative answer? Why?
</p>

<p>
2.7 Run nslookup so that you obtain an authoritative answer for the
mail servers for Yahoo! mail.
</p>

<p>
2.8 List the root servers. Starting from one of them, go down the
hierarchy until you reach a name server that is responsible for a name
and can give an authoritative answer. Take the example of your machine:
<tt>???.dongseo.ac.kr </tt>. Use nslookup to query a root server,
change the server according to the response and continue like this
until you get an authoritative answer. How many DNS servers do you
      need to query to get the authoritative answer?
</p>


<h3>3. DNS: Names</h3>

<p>3.1 Can one machine have several names and IP addresses? Hint: check your answers for Question 2.2 and 2.3</p>

<p>3.2 Are domain names case-sensitive?</p>
<p>
Use <a href="http://www.icann.org/tlds" target="new">www.icann.org/tlds</a> to answer the following questions.
</p>
<p>3.3 List the generic top-level domain names.</p>

<h3>4. A Different Application of DNS: DNS Black Lists (DNSBLs) to fight spam</h3>
<p>
NOTE: Before going ahead with excercises read the following text.
The text was taken from the article by Jaeyeon Jung and Emil Sit:
<a href="http://doi.acm.org/10.1145/1028788.1028838" target="new">
An empirical study of spam traffic and the use of DNS black lists</a>
</p>
<p>
<em>''Unsolicited bulk email (''spam'') is a major fraction of mail sent
and received on the Internet. One of the commonly deployed
techniques to block spam is address-based filtering, using which
one can refuse to accept mail from hosts that are believed to send
spam. Once identified, the IP address of a host engaged in spam delivery
is registered in centrally maintained databases. This database
is made available via the Internet DNS and hence often called domain
name system black lists (DNSBLs). Mail recipients can query
this database using standard DNS lookups and deny any mails from
the hosts that are listed in the database.
Over the past several years, an increasing number of DNSBLs
are offering various lists of IP addresses based on some criteria -
for example, each IP address may be an open relay, a virus
source, or an actual spam source caught by a spam trap.''
</em></p>
<p>
You can check yourself if some IP address is classified as a spam source.
If you want to use the DNSBL manually you should instruct your system to
do a DNS query for the information. For example, if you want to check if
1.2.3.4 is on the blacklist, you can use <tt>nslookup</tt> as follows:
<br>
<br>
<tt>nslookup 4.3.2.1.dnsbls_server_name</tt>
<br>
<br>
If you get back an IP address, then the IP you asked about is listed. If you get back a NXDOMAIN message, then the IP you asked about is not listed.
</p>

<p>Use the <tt>nslookup</tt> and the following DNSBLs servers:
<ul>
  <li>blackholes.five-ten-sg.com</li>
  <li>pbl.spamhaus.org</li>
 </ul>
to check if the two following IP addresses are classified as a spam source:
<ul>
  <li>209.85.229.147</li>
  <li>122.163.108.211</li>
</ul>
</p>

<p>4.1 Which type of DNS query is sent to get these answers? Hint: use Wireshark</p>

<p>4.2 Are these two IP addresses listed on the two DNSBLs?
Is the resulting code the same for all responses sent by DNSBLs?</p>

<p>
You can automate the process of checking if an IP address is classified
as a spam source. Instead of sending a DNS query to one DNSBL server
you can send such a query to many DNSBLs at once. To do so, open the
<a href="http://www.kloth.net/services/dnsbl.php" target="new">KLOTH.NET</a>
web site. Then type the IP address you want to verify into the
''Spam database lookup'' form.
</p>

<p>4.3 Check if your IP address is a spam source. Check if the two IP addresses 209.85.229.147 and 122.163.108.211 are listed. If yes, on how many DNSBLs they are listed? </p>


</body>
</html>
